<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ASET | Transfer Assistance & Mentorship</title>
    <link href="./shared/styles/main.css" rel="stylesheet">
    <link href="./shared/styles/ui-states.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    <style>
        .form-select:disabled {
            background-color: #f8f9fa;
            cursor: not-allowed;
            opacity: 0.6;
            border-style: dashed;
        }

        .select-feedback {
            font-size: 0.75rem;
            margin-top: 0.25rem;
            color: #64748b;
        }
    </style>
</head>

<body style="zoom: 80%;">

    <!-- Header -->
    <nav class="navbar navbar-expand-lg fixed-top bg-white border-bottom py-3">
        <div class="container">
            <a class="navbar-brand fw-bold text-primary d-flex align-items-center gap-2" href="./index.html">
                <span class="bg-primary text-white rounded p-1 fs-5"><i class="bi bi-mortarboard-fill"></i></span>
                <span style="font-family: var(--font-display); color: var(--aset-blue);">ASET</span>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navMain">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navMain">
                <ul class="navbar-nav ms-auto gap-4 fw-medium text-secondary">
                    <li class="nav-item"><a href="./index.html" class="nav-link text-dark">Home</a></li>
                    <li class="nav-item"><a href="#process" class="nav-link text-secondary">Process</a></li>
                    <li class="nav-item"><a href="#faq" class="nav-link text-secondary">FAQ</a></li>
                    <li class="nav-item">
                        <button class="btn btn-primary px-4" data-bs-toggle="modal" data-bs-target="#intakeModal"
                            onclick="goToStep(3)">
                            Login Portal
                        </button>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Hero Section (Blue Background as per Image) -->
    <section class="hero-visual d-flex align-items-center" style="margin-top: 70px; min-height: 85vh;">
        <div class="container position-relative z-1">
            <div class="row align-items-center">
                <div class="col-lg-6 text-white">
                    <h1 class="display-3 fw-bold mb-4 text-white hero-animate hero-animate-delay-2"
                        style="line-height: 1.1;">
                        Never Lose <br> a Semester Again!
                    </h1>
                    <p class="lead mb-5 opacity-75 hero-animate hero-animate-delay-3" style="max-width: 500px;">
                        Get Expert Help with Transfers, Probation, Deferred Admission & Academic Challenges in Minutes
                    </p>

                    <!-- Quick Actions Grid (Reflective of Image) -->
                    <div class="row g-3 mb-4 hero-animate hero-animate-delay-3">
                        <div class="col-4">
                            <div class="bg-white text-dark rounded-3 p-3 text-center h-100 shadow-sm">
                                <i class="bi bi-arrow-left-right fs-2 text-primary mb-2 d-block"></i>
                                <small class="fw-bold d-block lh-sm">Change of Programme</small>
                            </div>
                        </div>
                        <div class="col-4">
                            <div class="bg-white text-dark rounded-3 p-3 text-center h-100 shadow-sm">
                                <i class="bi bi-life-preserver fs-2 text-primary mb-2 d-block"></i>
                                <small class="fw-bold d-block lh-sm">Probation Help</small>
                            </div>
                        </div>
                        <div class="col-4">
                            <div class="bg-white text-dark rounded-3 p-3 text-center h-100 shadow-sm">
                                <i class="bi bi-buildings fs-2 text-primary mb-2 d-block"></i>
                                <small class="fw-bold d-block lh-sm">University Transfer</small>
                            </div>
                        </div>
                    </div>

                    <button class="btn btn-light btn-lg px-5 text-primary fw-bold hero-animate hero-animate-delay-4"
                        data-bs-toggle="modal" data-bs-target="#intakeModal">
                        Start Your Case <i class="bi bi-arrow-right ms-2"></i>
                    </button>
                </div>

                <!-- Right Side Visual / Graphic Placeholder -->
                <div class="col-lg-6 d-none d-lg-block position-relative">
                    <!-- Abstract representation of the 'book/grad cap' image -->
                    <div class="bg-white bg-opacity-10 rounded-circle position-absolute top-50 start-50 translate-middle"
                        style="width: 500px; height: 500px;"></div>
                    <div class="card p-4 border-0 shadow-lg position-relative" style="max-width: 400px; margin: auto;">
                        <div class="d-flex align-items-center gap-3 mb-3">
                            <div class="avatar rounded-circle bg-primary text-white d-flex align-items-center justify-content-center"
                                style="width: 48px; height: 48px;"><i class="bi bi-check-lg"></i></div>
                            <div>
                                <h6 class="fw-bold mb-0 text-dark">Application Approved</h6>
                                <small class="text-muted">Registry Department</small>
                            </div>
                        </div>
                        <div class="progress" style="height: 6px;">
                            <div class="progress-bar bg-success" style="width: 100%"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>


    <section class="py-5 bg-white border-bottom scroll-reveal">
        <div class="container">
            <div class="row align-items-center g-4">
                <!-- Stat 1 -->
                <div class="col-6 col-lg-3">
                    <div class="d-flex align-items-center gap-3">
                        <div class="stat-icon bg-primary-subtle text-primary rounded-circle d-flex align-items-center justify-content-center"
                            style="width: 48px; height: 48px; font-size: 1.2rem;">
                            <i class="bi bi-mortarboard"></i>
                        </div>
                        <div>
                            <h4 class="fw-bold mb-0 text-dark">2,300+</h4>
                            <div class="text-muted small fw-medium text-uppercase tracking-wider"
                                style="font-size: 0.65rem;">Cases processed</div>
                        </div>
                    </div>
                </div>
                <!-- Stat 2 -->
                <div class="col-6 col-lg-3">
                    <div class="d-flex align-items-center gap-3">
                        <div class="stat-icon bg-info-subtle text-info rounded-circle d-flex align-items-center justify-content-center"
                            style="width: 48px; height: 48px; font-size: 1.2rem;">
                            <i class="bi bi-arrow-left-right"></i>
                        </div>
                        <div>
                            <h4 class="fw-bold mb-0 text-dark">1,800+</h4>
                            <div class="text-muted small fw-medium text-uppercase tracking-wider"
                                style="font-size: 0.65rem;">Departmental Transfers</div>
                        </div>
                    </div>
                </div>
                <!-- Stat 3 -->
                <div class="col-6 col-lg-3">
                    <div class="d-flex align-items-center gap-3">
                        <div class="stat-icon bg-warning-subtle text-warning rounded-circle d-flex align-items-center justify-content-center"
                            style="width: 48px; height: 48px; font-size: 1.2rem;">
                            <i class="bi bi-shield-check"></i>
                        </div>
                        <div>
                            <h4 class="fw-bold mb-0 text-dark">900+</h4>
                            <div class="text-muted small fw-medium text-uppercase tracking-wider"
                                style="font-size: 0.65rem;">Probation Assistance</div>
                        </div>
                    </div>
                </div>
                <!-- Stat 4 -->
                <div class="col-6 col-lg-3">
                    <div class="d-flex align-items-center gap-3">
                        <div class="stat-icon bg-danger-subtle text-danger rounded-circle d-flex align-items-center justify-content-center"
                            style="width: 48px; height: 48px; font-size: 1.2rem;">
                            <i class="bi bi-calendar-event"></i>
                        </div>
                        <div>
                            <h4 class="fw-bold mb-0 text-dark">1,000+</h4>
                            <div class="text-muted small fw-medium text-uppercase tracking-wider"
                                style="font-size: 0.65rem;">Deferment/Suspension of studies</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- How ASET Works -->
    <section class="py-5 bg-white scroll-reveal" id="process">
        <div class="container py-5">
            <div class="text-center mb-5">
                <h2 class="fw-bold mb-3">How TAMP Works</h2>
                <p class="text-muted">Simple 3-step process to resolve your academic issues.</p>
            </div>

            <div class="row g-4 justify-content-center">
                <div class="col-md-3">
                    <div class="p-4 border rounded-4 text-center h-100">
                        <div class="mb-3 text-primary fs-1"><i class="bi bi-file-earmark-text"></i></div>
                        <h5>Submit Your Request</h5>
                        <p class="text-muted small">Select your issue type and fill the form.</p>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="p-4 border rounded-4 text-center h-100">
                        <div class="mb-3 text-primary fs-1"><i class="bi bi-cloud-arrow-up"></i></div>
                        <h5>Upload Documents</h5>
                        <p class="text-muted small">Attach necessary result slips and letters.</p>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="p-4 border rounded-4 text-center h-100 text-bg-warning bg-opacity-10 border-warning">
                        <div class="mb-3 text-warning fs-1"><i class="bi bi-coin"></i></div>
                        <h5 class="text-dark">Pay Service Fee</h5>
                        <p class="text-muted small">Pay ₦5,000 via our secure gateway.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Use Cases -->
    <section class="py-5 bg-light scroll-reveal">
        <div class="container py-5">
            <div class="text-center mb-5">
                <h2 class="fw-bold">Common Requests on ASET</h2>
            </div>
            <div class="row g-4 d-flex justify-content-center">
                <div class="col-6 col-md-4 col-lg-2">
                    <div class="card border-0 shadow-sm p-4 rounded-4 text-center h-100">
                        <div class="mb-3 text-primary"><i class="bi bi-star-fill fs-3"></i></div>
                        <h6 class="mb-0">Voluntary Change Program (CGPA 3.0 & above)</h6>
                    </div>
                </div>
                <div class="col-6 col-md-4 col-lg-2">
                    <div class="card border-0 shadow-sm p-4 rounded-4 text-center h-100">
                        <div class="mb-3 text-primary"><i class="bi bi-arrow-repeat fs-3"></i></div>
                        <h6 class="mb-0">Change of Programme</h6>
                    </div>
                </div>
                <div class="col-6 col-md-4 col-lg-2">
                    <div class="card border-0 shadow-sm p-4 rounded-4 text-center h-100">
                        <div class="mb-3 text-primary"><i class="bi bi-signpost-split fs-3"></i></div>
                        <h6 class="mb-0">Transfer Request</h6>
                    </div>
                </div>
                <div class="col-6 col-md-4 col-lg-2">
                    <div class="card border-0 shadow-sm p-4 rounded-4 text-center h-100">
                        <div class="mb-3 text-primary"><i class="bi bi-pause-circle fs-3"></i></div>
                        <h6 class="mb-0">Deferment / Suspension</h6>
                    </div>
                </div>
                <div class="col-6 col-md-4 col-lg-2">
                    <div class="card border-0 shadow-sm p-4 rounded-4 text-center h-100">
                        <div class="mb-3 text-primary"><i class="bi bi-hash fs-3"></i></div>
                        <h6 class="mb-0">Matric Number Generation</h6>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Platform Capabilities -->
    <section class="py-5 bg-white scroll-reveal">
        <div class="container py-5">
            <div class="text-center mb-5">
                <h2 class="fw-bold">Built for Students, Officers, and Institutions</h2>
            </div>
            <div class="row align-items-center g-5">
                <div class="col-lg-6">
                    <ul class="list-unstyled d-flex flex-column gap-3 mb-0">
                        <li class="d-flex align-items-start gap-3">
                            <i class="bi bi-check-circle-fill text-primary mt-1"></i>
                            <div><strong class="d-block">Case submission and document uploads</strong></div>
                        </li>
                        <li class="d-flex align-items-start gap-3">
                            <i class="bi bi-check-circle-fill text-primary mt-1"></i>
                            <div><strong class="d-block">Multi-stage institutional workflow</strong></div>
                        </li>
                        <li class="d-flex align-items-start gap-3">
                            <i class="bi bi-check-circle-fill text-primary mt-1"></i>
                            <div><strong class="d-block">Role-based access control</strong></div>
                        </li>
                        <li class="d-flex align-items-start gap-3">
                            <i class="bi bi-check-circle-fill text-primary mt-1"></i>
                            <div><strong class="d-block">Audit trail for every action</strong></div>
                        </li>
                        <li class="d-flex align-items-start gap-3">
                            <i class="bi bi-check-circle-fill text-primary mt-1"></i>
                            <div><strong class="d-block">Secure digital records</strong></div>
                        </li>
                    </ul>
                </div>
                <div class="col-lg-6">
                    <div class="card border bg-light p-4 rounded-4 user-select-none">
                        <div class="d-flex align-items-center gap-3 mb-4 opacity-50">
                            <small class="fw-bold text-uppercase text-muted">Case Timeline</small>
                        </div>
                        <div class="border-start border-2 ps-4 position-relative ms-2">
                            <div class="position-absolute start-0 top-0 translate-middle rounded-circle bg-primary"
                                style="width: 12px; height: 12px;"></div>
                            <div class="mb-4">
                                <h6 class="fw-bold mb-1">Request Submitted</h6>
                                <small class="text-muted">Jan 12, 10:00 AM</small>
                            </div>
                            <div class="position-absolute start-0 top-50 translate-middle rounded-circle bg-primary"
                                style="width: 12px; height: 12px;"></div>
                            <div class="mb-4">
                                <h6 class="fw-bold mb-1">Department Review</h6>
                                <small class="text-muted">Jan 14, 02:30 PM</small>
                            </div>
                            <div class="position-absolute start-0 bottom-0 translate-middle rounded-circle bg-success"
                                style="width: 12px; height: 12px;"></div>
                            <div>
                                <h6 class="fw-bold mb-1">Approved</h6>
                                <small class="text-muted">Pending Final Check</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Call to Action -->
    <section class="py-5 bg-light border-bottom scroll-reveal">
        <div class="container py-5 text-center">
            <div class="col-lg-8 mx-auto">
                <h2 class="fw-bold mb-3">Ready to Submit a Case?</h2>
                <p class="lead text-muted mb-4">Start your request and track it seamlessly from submission to
                    resolution.
                </p>
                <button class="btn btn-primary btn-lg px-5 fw-bold shadow" data-bs-toggle="modal"
                    data-bs-target="#intakeModal">Get Started</button>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-white border-top pt-5 pb-3">
        <div class="container">
            <div class="row g-4 mb-5">
                <div class="col-lg-3">
                    <a class="navbar-brand fw-bold text-primary d-flex align-items-center gap-2 mb-3" href="#">
                        <span class="bg-primary text-white rounded p-1 fs-5"><i
                                class="bi bi-mortarboard-fill"></i></span>
                        <span style="font-family: var(--font-display); color: var(--aset-blue);">ASET</span>
                    </a>
                    <p class="text-muted small">Transfer Assistance & Mentorship Platform</p>
                </div>
                <div class="col-lg-3 col-6">
                    <h6 class="fw-bold mb-3">Platform</h6>
                    <ul class="list-unstyled small d-flex flex-column gap-2" id="footerPlatformLinks">
                        <li><a href="#" data-route="STUDENT_DASHBOARD" class="text-decoration-none text-muted">Student
                                Dashboard</a></li>
                        <li><a href="#" data-route="ADMIN_DASHBOARD" class="text-decoration-none text-muted">Admin
                                Dashboard</a></li>
                        <li><a href="#" data-route="OFFICER_DASHBOARD" class="text-decoration-none text-muted">Officer
                                Dashboard</a></li>
                        <li><a href="#" data-route="MENTOR_DASHBOARD" class="text-decoration-none text-muted">Mentor
                                Dashboard</a></li>
                    </ul>
                </div>
                <div class="col-lg-3 col-6">
                    <h6 class="fw-bold mb-3">Support</h6>
                    <ul class="list-unstyled small d-flex flex-column gap-2">
                        <li><a href="#" class="text-decoration-none text-muted">Help Center</a></li>
                        <li><a href="#faq" class="text-decoration-none text-muted">FAQs</a></li>
                        <li><a href="#" class="text-decoration-none text-muted">Contact Support</a></li>
                        <li><a href="#" class="text-decoration-none text-muted">Privacy Policy</a></li>
                    </ul>
                </div>
                <div class="col-lg-3">
                    <h6 class="fw-bold mb-3">Contact</h6>
                    <ul class="list-unstyled small d-flex flex-column gap-2">
                        <li><a href="mailto:support@aset.ng" class="text-decoration-none text-muted">support@aset.ng</a>
                        </li>
                        <li class="text-muted">Lagos, Nigeria</li>
                    </ul>
                </div>
            </div>
            <div
                class="border-top pt-3 d-flex flex-column flex-md-row justify-content-between align-items-center gap-3">
                <small class="text-muted">© 2026 ASET. All rights reserved.</small>
                <div class="d-flex gap-3">
                    <a href="#" class="text-muted"><i class="bi bi-linkedin"></i></a>
                    <a href="#" class="text-muted"><i class="bi bi-twitter"></i></a>
                    <a href="#" class="text-muted"><i class="bi bi-github"></i></a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Login Modal (Redesigned & Premium) -->
    <div class="modal fade" id="loginModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content border-0 shadow-depth rounded-4 overflow-hidden">
                <div class="modal-body p-0">
                    <div class="row g-0">
                        <div class="col-12">
                            <!-- Header Area -->
                            <div class="p-4 p-md-5 text-center position-relative">
                                <button type="button" class="btn-close position-absolute top-0 end-0 m-4"
                                    data-bs-dismiss="modal"></button>
                                <div class="mb-4 d-inline-flex align-items-center justify-content-center bg-primary bg-opacity-10 rounded-circle"
                                    style="width: 80px; height: 80px;">
                                    <i class="bi bi-shield-lock text-primary fs-1"></i>
                                </div>
                                <h3 class="fw-bold mb-1">Portal Login</h3>
                                <p class="text-secondary opacity-75">Enter your credentials to access your account</p>
                            </div>
                            <!-- Form Area -->
                            <div class="px-4 px-md-5 pb-5">
                                <form id="loginForm">
                                    <div class="mb-3">
                                        <label class="form-label fw-bold small text-secondary ms-1">Email
                                            Address</label>
                                        <div class="input-group">
                                            <span class="input-group-text bg-light border-0"><i
                                                    class="bi bi-envelope text-secondary"></i></span>
                                            <input type="email" class="form-control form-control-lg bg-light border-0"
                                                id="loginEmail" placeholder="student@aset.edu.ng"
                                                value="student@aset.edu.ng">
                                        </div>
                                    </div>
                                    <div class="mb-3">
                                        <div class="d-flex justify-content-between align-items-center mb-1">
                                            <label
                                                class="form-label fw-bold small text-secondary ms-1 mb-0">Password</label>
                                            <a href="#"
                                                class="text-primary small text-decoration-none fw-medium">Forgot?</a>
                                        </div>
                                        <div class="input-group">
                                            <span class="input-group-text bg-light border-0"><i
                                                    class="bi bi-lock text-secondary"></i></span>
                                            <input type="password"
                                                class="form-control form-control-lg bg-light border-0"
                                                id="loginPassword" value="password">
                                            <button class="btn btn-light border-0 bg-light" type="button">
                                                <i class="bi bi-eye text-secondary"></i>
                                            </button>
                                        </div>
                                    </div>
                                    <div class="mb-4 form-check d-flex align-items-center gap-2">
                                        <input type="checkbox" class="form-check-input mt-0" id="rememberMe">
                                        <label class="form-check-label small text-secondary" for="rememberMe">Remember
                                            me</label>
                                    </div>
                                    <button type="submit" class="btn btn-primary w-100 btn-lg shadow-sm">
                                        Sign In <i class="bi bi-arrow-right ms-2 small"></i>
                                    </button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Intake Modal -->
    <div class="modal fade" id="intakeModal" tabindex="-1" data-bs-backdrop="static" data-bs-keyboard="false">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content border-0 shadow-lg rounded-4 overflow-hidden">
                <div class="modal-body p-0">
                    <!-- Step 1: Issue Selection -->
                    <div id="intakeStep1" class="intake-step active p-5">
                        <div class="text-center mb-4">
                            <div class="mb-3 d-inline-flex align-items-center justify-content-center bg-primary bg-opacity-10 rounded-circle"
                                style="width: 64px; height: 64px;">
                                <i class="bi bi-patch-question text-primary fs-1"></i>
                            </div>
                            <h3 class="fw-bold">What issue are you facing?</h3>
                            <p class="text-muted">Select a category to help us route your case</p>
                        </div>
                        <div class="mb-4">
                            <label class="form-label fw-bold small text-secondary">Issue Type</label>
                            <select id="issueType" class="form-select form-select-lg" onchange="validateStep1()">
                                <option value="" selected disabled>Choose your issue...</option>
                                <option value="Change Program & Departmental Issues">Change Program & Departmental
                                    Issues</option>
                                <option value="Voluntary Change Program (CGPA 3.0 & above)">Voluntary Change Program
                                    (CGPA 3.0 & above)</option>
                                <option value="Probation / Withdrawal Issues">Probation / Withdrawal Issues</option>
                                <option value="Suspension of Studies">Suspension of Studies</option>
                                <option value="Deferment of Studies">Deferment of Studies</option>
                                <option value="Result & Examination Issues">Result & Examination Issues</option>
                                <option value="Course Registration Problems">Course Registration Problems</option>
                                <option value="Portal & Payment Issues">Portal & Payment Issues</option>
                                <option value="Transfer to Another Nigerian University (Interschool)">Transfer to
                                    Another Nigerian University (Interschool)</option>
                                <option value="Financial, Loan & Scholarship Support">Financial, Loan & Scholarship
                                    Support</option>
                                <option value="Multiple / Complex Issues">Multiple / Complex Issues</option>
                            </select>
                        </div>


                        <button class="btn btn-primary w-100 btn-lg py-3" id="btnContinueStep1" disabled
                            onclick="handleIntakeStart()">Continue</button>
                        <div class="text-center mt-3">
                            <button class="btn btn-link text-muted text-decoration-none small"
                                data-bs-dismiss="modal">Cancel and exit</button>
                        </div>
                    </div>

                    <!-- Step 2: Personal Details -->
                    <div id="intakeStep2" class="intake-step p-5">
                        <div class="text-center mb-4">
                            <h3 class="fw-bold">Tell us about yourself</h3>
                            <p class="text-muted">Fill in your information to proceed</p>
                        </div>
                        <div class="row g-3 mb-4">
                            <div class="col-md-12">
                                <label class="form-label small fw-bold">Matriculation Number</label>
                                <input type="text" class="form-control form-control-lg" id="intakeMatric"
                                    placeholder="e.g. 2024/123456" style="font-size: 1.25rem; font-weight: 600;">
                                <div class="select-feedback">Format: YYYY/123456</div>
                            </div>

                            <!-- New State Selection -->
                            <div class="col-md-6">
                                <label class="form-label small fw-bold">State / Region</label>
                                <select class="form-select" id="intakeState" onchange="handleStateChange()">
                                    <option value="" selected disabled>Select state</option>
                                    <!-- Populated by JS -->
                                </select>
                            </div>

                            <div class="col-md-6">
                                <label class="form-label small fw-bold">Institution</label>
                                <select class="form-select" id="intakeInstitution" disabled
                                    onchange="handleInstitutionChange()">
                                    <option value="" selected disabled>Select institution in your state</option>
                                </select>
                            </div>

                            <div class="col-md-6">
                                <label class="form-label small fw-bold">Faculty</label>
                                <select class="form-select" id="intakeFaculty" disabled
                                    onchange="handleFacultyChange()">
                                    <option value="" selected disabled>Select faculty</option>
                                </select>
                            </div>

                            <div class="col-md-6">
                                <label class="form-label small fw-bold">Department</label>
                                <select class="form-select" id="intakeDepartment" disabled>
                                    <option value="" selected disabled>Select department</option>
                                </select>
                            </div>

                            <div class="col-md-4">
                                <label class="form-label small fw-bold">Level / Year</label>
                                <select class="form-select" id="intakeLevel">
                                    <option value="100">100 Level</option>
                                    <option value="200">200 Level</option>
                                    <option value="300">300 Level</option>
                                    <option value="400">400 Level</option>
                                    <option value="500">500 Level</option>
                                </select>
                            </div>
                            <div class="col-md-8">
                                <label class="form-label small fw-bold">Email Address</label>
                                <input type="email" class="form-control" id="intakeEmail" placeholder="name@email.com">
                            </div>
                            <div class="col-md-12">
                                <label class="form-label small fw-bold">Phone Number</label>
                                <input type="tel" class="form-control" id="intakePhone" placeholder="080 000 0000">
                            </div>
                        </div>
                        <button class="btn btn-primary w-100 btn-lg py-3" onclick="proceedFromStep2()">Continue</button>
                        <div class="text-center mt-3">
                            <button class="btn btn-link text-muted text-decoration-none small"
                                onclick="goToStep(1)">Back</button>
                        </div>
                    </div>

                    <!-- Step 3: Auth -->
                    <div id="intakeStep3" class="intake-step p-5">
                        <div class="text-center mb-4">
                            <h3 class="fw-bold">Secure your account</h3>
                            <p class="text-muted">Authenticate to access your dashboard</p>
                        </div>
                        <div class="mb-3">
                            <label class="form-label small fw-bold">Matriculation Number</label>
                            <input type="text" class="form-control bg-light" id="authMatric" readonly>
                        </div>
                        <div class="mb-4">
                            <label class="form-label small fw-bold">Password</label>
                            <input type="password" class="form-control" id="authPassword"
                                placeholder="Minimum 6 characters">
                        </div>
                        <div class="row g-2">
                            <div class="col-6">
                                <button class="btn btn-primary w-100 btn-lg"
                                    onclick="finishFlow('login')">Login</button>
                            </div>
                            <div class="col-6">
                                <button class="btn btn-outline-primary w-100 btn-lg"
                                    onclick="finishFlow('signup')">Create Account</button>
                            </div>
                        </div>
                        <div class="text-center mt-3">
                            <button class="btn btn-link text-muted text-decoration-none small"
                                onclick="goToStep(2)">Back</button>
                        </div>
                    </div>

                    <!-- SPECIALIZED FLOW: Suspension / Deferment -->

                    <!-- Suspension Step 1: Basic Info & Duration -->
                    <div id="suspensionStep1" class="intake-step p-5">
                        <div class="text-center mb-4">
                            <div class="mb-3 d-inline-flex align-items-center justify-content-center bg-danger bg-opacity-10 rounded-circle"
                                style="width: 64px; height: 64px;">
                                <i class="bi bi-pause-circle text-danger fs-1"></i>
                            </div>
                            <h3 class="fw-bold">Suspension / Deferment Request</h3>
                            <p class="text-muted">Please provide details for your academic pause</p>
                        </div>
                        <div class="row g-3">
                            <div class="col-md-12">
                                <label class="form-label small fw-bold">Reason for Request</label>
                                <select class="form-select" id="suspensionReason">
                                    <option value="Health Issues">Health Issues</option>
                                    <option value="Financial Constraints">Financial Constraints</option>
                                    <option value="Personal / Family Reasons">Personal / Family Reasons</option>
                                    <option value="Travel / International Opportunity">Travel / International
                                        Opportunity</option>
                                    <option value="Military / National Service">Military / National Service</option>
                                    <option value="Other">Other (Please specify below)</option>
                                </select>
                            </div>
                            <div class="col-md-12">
                                <textarea class="form-control" id="suspensionDetail" rows="2"
                                    placeholder="Additional details (optional)"></textarea>
                            </div>
                            <div class="col-md-12">
                                <label class="form-label small fw-bold">Desired Duration</label>
                                <select class="form-select" id="suspensionDuration">
                                    <option value="One Semester">One Semester</option>
                                    <option value="One Academic Session">One Academic Session (2 Semesters)</option>
                                    <option value="Two Academic Sessions">Two Academic Sessions</option>
                                </select>
                            </div>
                        </div>
                        <button class="btn btn-primary w-100 btn-lg py-3 mt-4"
                            onclick="goToStep('suspensionStep2')">Next: Document Upload</button>
                    </div>

                    <!-- Suspension Step 2: Document Upload -->
                    <div id="suspensionStep2" class="intake-step p-4">
                        <div class="text-center mb-4">
                            <h4 class="fw-bold">Mandatory Document Upload</h4>
                            <p class="text-muted small">All documents must be verified before proceeding</p>
                        </div>
                        <div class="upload-scroll-area px-2" style="max-height: 350px; overflow-y: auto;">
                            <!-- Doc Items -->
                            <div
                                class="doc-upload-item p-3 border rounded-3 mb-2 bg-light d-flex align-items-center justify-content-between">
                                <div class="d-flex align-items-center gap-3">
                                    <i class="bi bi-file-earmark-check fs-4 text-primary"></i>
                                    <div>
                                        <div class="fw-bold small">School Fees Receipt</div>
                                        <div class="text-muted" style="font-size: 0.7rem;">Verified • PDF/JPG/PNG</div>
                                    </div>
                                </div>
                                <input type="file" class="d-none" id="file_fees" accept=".pdf,.jpg,.jpeg,.png"
                                    onchange="updateUploadStatus(this)">
                                <button class="btn btn-sm btn-outline-primary"
                                    onclick="document.getElementById('file_fees').click()"><i
                                        class="bi bi-upload"></i></button>
                            </div>
                            <div
                                class="doc-upload-item p-3 border rounded-3 mb-2 bg-light d-flex align-items-center justify-content-between">
                                <div class="d-flex align-items-center gap-3">
                                    <i class="bi bi-file-earmark-check fs-4 text-primary"></i>
                                    <div>
                                        <div class="fw-bold small">Acceptance Fee Receipt</div>
                                        <div class="text-muted" style="font-size: 0.7rem;">Pending • PDF/JPG/PNG</div>
                                    </div>
                                </div>
                                <input type="file" class="d-none" id="file_acceptance" accept=".pdf,.jpg,.jpeg,.png"
                                    onchange="updateUploadStatus(this)">
                                <button class="btn btn-sm btn-outline-primary"
                                    onclick="document.getElementById('file_acceptance').click()"><i
                                        class="bi bi-upload"></i></button>
                            </div>
                            <div
                                class="doc-upload-item p-3 border rounded-3 mb-2 bg-light d-flex align-items-center justify-content-between">
                                <div class="d-flex align-items-center gap-3">
                                    <i class="bi bi-file-earmark-check fs-4 text-primary"></i>
                                    <div>
                                        <div class="fw-bold small">Departmental Dues Receipt</div>
                                        <div class="text-muted" style="font-size: 0.7rem;">Pending • PDF/JPG/PNG</div>
                                    </div>
                                </div>
                                <input type="file" class="d-none" id="file_dept" accept=".pdf,.jpg,.jpeg,.png"
                                    onchange="updateUploadStatus(this)">
                                <button class="btn btn-sm btn-outline-primary"
                                    onclick="document.getElementById('file_dept').click()"><i
                                        class="bi bi-upload"></i></button>
                            </div>
                            <div
                                class="doc-upload-item p-3 border rounded-3 mb-2 bg-light d-flex align-items-center justify-content-between">
                                <div class="d-flex align-items-center gap-3">
                                    <i class="bi bi-file-earmark-check fs-4 text-primary"></i>
                                    <div>
                                        <div class="fw-bold small">Faculty Dues Receipt</div>
                                        <div class="text-muted" style="font-size: 0.7rem;">Pending • PDF/JPG/PNG</div>
                                    </div>
                                </div>
                                <input type="file" class="d-none" id="file_faculty" accept=".pdf,.jpg,.jpeg,.png"
                                    onchange="updateUploadStatus(this)">
                                <button class="btn btn-sm btn-outline-primary"
                                    onclick="document.getElementById('file_faculty').click()"><i
                                        class="bi bi-upload"></i></button>
                            </div>
                            <div
                                class="doc-upload-item p-3 border rounded-3 mb-2 bg-light d-flex align-items-center justify-content-between">
                                <div class="d-flex align-items-center gap-3">
                                    <i class="bi bi-file-earmark-text fs-4 text-primary"></i>
                                    <div>
                                        <div class="fw-bold small">Letter of Suspension</div>
                                        <div class="text-muted" style="font-size: 0.7rem;">Required • Formal Request
                                        </div>
                                    </div>
                                </div>
                                <input type="file" class="d-none" id="file_letter" accept=".pdf,.jpg,.jpeg,.png"
                                    onchange="updateUploadStatus(this)">
                                <button class="btn btn-sm btn-outline-primary"
                                    onclick="document.getElementById('file_letter').click()"><i
                                        class="bi bi-upload"></i></button>
                            </div>
                            <div
                                class="doc-upload-item p-3 border rounded-3 mb-2 bg-light d-flex align-items-center justify-content-between">
                                <div class="d-flex align-items-center gap-3">
                                    <i class="bi bi-file-earmark-check fs-4 text-primary"></i>
                                    <div>
                                        <div class="fw-bold small">JAMB Admission Letter</div>
                                        <div class="text-muted" style="font-size: 0.7rem;">Required</div>
                                    </div>
                                </div>
                                <input type="file" class="d-none" id="file_jamb" accept=".pdf,.jpg,.jpeg,.png"
                                    onchange="updateUploadStatus(this)">
                                <button class="btn btn-sm btn-outline-primary"
                                    onclick="document.getElementById('file_jamb').click()"><i
                                        class="bi bi-upload"></i></button>
                            </div>
                            <div
                                class="doc-upload-item p-3 border rounded-3 mb-2 bg-light d-flex align-items-center justify-content-between">
                                <div class="d-flex align-items-center gap-3">
                                    <i class="bi bi-file-earmark-check fs-4 text-primary"></i>
                                    <div>
                                        <div class="fw-bold small">School Admission Letter</div>
                                        <div class="text-muted" style="font-size: 0.7rem;">Required</div>
                                    </div>
                                </div>
                                <input type="file" class="d-none" id="file_school" accept=".pdf,.jpg,.jpeg,.png"
                                    onchange="updateUploadStatus(this)">
                                <button class="btn btn-sm btn-outline-primary"
                                    onclick="document.getElementById('file_school').click()"><i
                                        class="bi bi-upload"></i></button>
                            </div>
                        </div>
                        <div class="alert alert-info py-2 px-3 mt-3 mb-3 d-flex align-items-center gap-2"
                            style="font-size: 0.75rem;">
                            <i class="bi bi-info-circle-fill"></i>
                            <span>You can save progress and upload remaining docs later.</span>
                        </div>
                        <button class="btn btn-success w-100 btn-lg py-3" onclick="handleSuspensionSubmit()">Submit
                            Request & Review</button>
                        <div class="text-center mt-2 small text-muted">A secure login prompt will follow if session is
                            expired.</div>
                    </div>

                    <!-- Suspension Step 3: Counselling Automation -->
                    <div id="suspensionStep3" class="intake-step p-5">
                        <div class="text-center mb-5">
                            <div class="mb-4 d-inline-flex align-items-center justify-content-center bg-success bg-opacity-10 rounded-circle"
                                style="width: 80px; height: 80px;">
                                <i class="bi bi-calendar-check text-success" style="font-size: 2.5rem;"></i>
                            </div>
                            <h3 class="fw-bold">Application Received!</h3>
                            <p class="text-muted">Counselling has been automatically scheduled as part of the process.
                            </p>
                        </div>

                        <div class="card border-primary shadow-sm mb-5">
                            <div class="card-header bg-primary text-white py-3 fw-bold">
                                Booking Confirmation: #ASET-CN-9204
                            </div>
                            <div class="card-body p-4">
                                <div class="row align-items-center">
                                    <div class="col-auto">
                                        <div class="bg-light p-3 rounded text-center" style="width: 70px;">
                                            <div class="small text-uppercase fw-bold text-muted">Feb</div>
                                            <div class="h4 fw-bold mb-0">18</div>
                                        </div>
                                    </div>
                                    <div class="col">
                                        <h6 class="fw-bold mb-1">Mandatory Counselling Session</h6>
                                        <div class="small text-muted mb-1"><i class="bi bi-clock me-1"></i> 10:30 AM -
                                            11:15 AM</div>
                                        <div class="small text-muted"><i class="bi bi-person-badge me-1"></i> Advisor:
                                            Dr. (Mrs) Olufemi</div>
                                    </div>
                                </div>
                                <hr>
                                <div class="d-flex align-items-center gap-2 text-primary small fw-bold">
                                    <i class="bi bi-geo-alt-fill"></i>
                                    <span>Venue: Students Affairs Counselling Unit, Block B</span>
                                </div>
                            </div>
                        </div>

                        <div class="mb-5">
                            <h6 class="fw-bold mb-3">Next Action: Progress Tracking</h6>
                            <div class="progress" style="height: 12px; border-radius: 6px;">
                                <div class="progress-bar progress-bar-striped progress-bar-animated bg-primary"
                                    role="progressbar" style="width: 20%"></div>
                            </div>
                            <div class="d-flex justify-content-between mt-2 small text-muted">
                                <span>Application Stage</span>
                                <span>20% Complete</span>
                            </div>
                        </div>

                        <button class="btn btn-primary w-100 btn-lg shadow" onclick="goToStep('suspensionStep4')">Track
                            Full Application Status</button>
                    </div>

                    <!-- Suspension Step 4: Progress Tracker -->
                    <div id="suspensionStep4" class="intake-step p-5">
                        <div class="d-flex justify-content-between align-items-center mb-5">
                            <h4 class="fw-bold mb-0">Request Tracking</h4>
                            <span class="badge bg-warning text-dark px-3 py-2">IN PROGRESS</span>
                        </div>

                        <div class="tracking-timeline">
                            <!-- Stage 1 -->
                            <div class="d-flex gap-4 mb-4 position-relative">
                                <div class="timeline-v-line"
                                    style="position: absolute; left: 16px; top: 32px; bottom: -32px; width: 2px; background: #10b981;">
                                </div>
                                <div class="bg-success rounded-circle d-flex align-items-center justify-content-center text-white p-2 z-1"
                                    style="width: 32px; height: 32px;">
                                    <i class="bi bi-check-lg fw-bold"></i>
                                </div>
                                <div class="flex-grow-1">
                                    <h6 class="fw-bold mb-1">Application Submitted</h6>
                                    <p class="text-muted small mb-0">Your request ID #SUS-2026-X01 has been recorded.
                                    </p>
                                    <div class="small text-muted mt-1">Just now</div>
                                </div>
                            </div>
                            <!-- Stage 2 -->
                            <div class="d-flex gap-4 mb-4 position-relative">
                                <div class="timeline-v-line"
                                    style="position: absolute; left: 16px; top: 32px; bottom: -32px; width: 2px; background: #e2e8f0;">
                                </div>
                                <div class="bg-primary rounded-circle d-flex align-items-center justify-content-center text-white p-2 z-1"
                                    style="width: 32px; height: 32px;">
                                    <div class="spinner-border spinner-border-sm" role="status"></div>
                                </div>
                                <div class="flex-grow-1">
                                    <h6 class="fw-bold mb-1 text-primary">Documents Verified</h6>
                                    <p class="text-muted small mb-0">Registrar's office is validating your 7 uploaded
                                        documents.</p>
                                    <div class="small text-muted mt-1">Processing...</div>
                                </div>
                            </div>
                            <!-- Stage 3 -->
                            <div class="d-flex gap-4 mb-4 position-relative">
                                <div class="timeline-v-line"
                                    style="position: absolute; left: 16px; top: 32px; bottom: -32px; width: 2px; background: #e2e8f0;">
                                </div>
                                <div class="bg-white border-2 border-primary rounded-circle d-flex align-items-center justify-content-center text-primary p-2 z-1"
                                    style="width: 32px; height: 32px;">
                                    <i class="bi bi-calendar-event fw-bold"></i>
                                </div>
                                <div class="flex-grow-1 opacity-75">
                                    <h6 class="fw-bold mb-1">Counselling Completed</h6>
                                    <p class="text-muted small mb-0">Scheduled for Feb 18, 2026. Auto-updates on
                                        attendance.</p>
                                </div>
                            </div>
                            <!-- Stage 4 -->
                            <div class="d-flex gap-4 mb-4 position-relative">
                                <div class="timeline-v-line"
                                    style="position: absolute; left: 16px; top: 32px; bottom: -32px; width: 2px; background: #e2e8f0;">
                                </div>
                                <div class="bg-light border-2 border-info rounded-circle d-flex align-items-center justify-content-center text-info p-2 z-1"
                                    style="width: 32px; height: 32px;">
                                    <i class="bi bi-hourglass-split fw-bold"></i>
                                </div>
                                <div class="flex-grow-1 opacity-50">
                                    <h6 class="fw-bold mb-1">Pending Approval</h6>
                                    <p class="text-muted small mb-0">Final review by the Registrar.</p>
                                </div>
                            </div>
                            <!-- Stage 5 -->
                            <div class="d-flex gap-4 mb-4 position-relative">
                                <div class="bg-light border-2 border-secondary rounded-circle d-flex align-items-center justify-content-center text-secondary p-2 z-1"
                                    style="width: 32px; height: 32px;">
                                    <i class="bi bi-check-circle fw-bold"></i>
                                </div>
                                <div class="flex-grow-1 opacity-50">
                                    <h6 class="fw-bold mb-1">Approved / Rejected</h6>
                                    <p class="text-muted small mb-0">Decision record issued in portal.</p>
                                </div>
                            </div>
                        </div>

                        <div class="mt-5 text-center">
                            <button class="btn btn-outline-primary btn-sm px-4" onclick="location.reload()">Save and
                                Exit to Portal</button>
                            <p class="small text-muted mt-3">You will receive an SMS and email notification for every
                                status change.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Dashboard View (Initially Hidden) -->
    <div id="dashboardView" class="py-5" style="display:none; min-height: 100vh; background: #f8f9fc;">
        <div class="container py-5">
            <div class="row justify-content-center">
                <div class="col-lg-10">
                    <div class="d-flex justify-content-between align-items-center mb-5">
                        <div class="d-flex align-items-center gap-3">
                            <span class="bg-primary text-white rounded p-1 fs-5"><i
                                    class="bi bi-mortarboard-fill"></i></span>
                            <h2 class="fw-bold mb-0" style="color: var(--aset-blue);">ASET Dashboard</h2>
                        </div>
                        <button class="btn btn-outline-danger btn-sm px-4" onclick="location.reload()">Logout</button>
                    </div>

                    <div class="mb-5">
                        <h2 class="fw-bold mb-1">Welcome back, <span id="studentNameDisplay">Student</span></h2>
                        <p class="text-muted">Your current case status and dashboard.</p>
                    </div>

                    <div class="card border-0 shadow-sm rounded-4 overflow-hidden mb-4">
                        <div class="card-body p-4 p-md-5">
                            <div class="row align-items-center">
                                <div class="col-md-7">
                                    <div class="badge bg-primary bg-opacity-10 text-primary px-3 py-2 mb-3">Case ID:
                                        ASET-2026-X8429</div>
                                    <h3 class="fw-bold mb-3" id="selectedIssueDisplay">Issue Type</h3>
                                    <p class="text-muted mb-4">Your request has been received and is currently in the
                                        initial review phase. A coordinator will be assigned shortly.</p>
                                    <div class="d-flex align-items-center gap-3">
                                        <div class="status-dot bg-warning"
                                            style="width: 12px; height: 12px; border-radius: 50%;"></div>
                                        <span class="fw-bold text-dark" id="caseStatusDisplay">Pending Review</span>
                                    </div>
                                </div>
                                <div class="col-md-5 text-center d-none d-md-block">
                                    <div class="p-4 bg-light rounded-circle d-inline-block">
                                        <i class="bi bi-clock-history text-primary" style="font-size: 4rem;"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row g-4">
                        <div class="col-md-8">
                            <div class="card border-0 shadow-sm rounded-4 h-100">
                                <div class="card-body p-4">
                                    <h5 class="fw-bold mb-4">Case Timeline</h5>
                                    <div class="timeline-small">
                                        <div class="d-flex gap-3 mb-4">
                                            <div class="rounded-circle bg-success text-white d-flex align-items-center justify-content-center flex-shrink-0"
                                                style="width: 28px; height: 28px;"><i class="bi bi-check-lg small"></i>
                                            </div>
                                            <div>
                                                <h6 class="fw-bold mb-0">Case Submission</h6><small
                                                    class="text-muted">Completed just now</small>
                                            </div>
                                        </div>
                                        <div class="d-flex gap-3 mb-4">
                                            <div class="rounded-circle bg-primary bg-opacity-20 text-primary d-flex align-items-center justify-content-center flex-shrink-0"
                                                style="width: 28px; height: 28px;"><i
                                                    class="bi bi-arrow-right small"></i></div>
                                            <div>
                                                <h6 class="fw-bold mb-0 text-dark">Institutional Verification</h6><small
                                                    class="text-muted">Estimated: 24-48 hours</small>
                                            </div>
                                        </div>
                                        <div class="d-flex gap-3">
                                            <div class="rounded-circle bg-light text-muted d-flex align-items-center justify-content-center flex-shrink-0"
                                                style="width: 28px; height: 28px;"><i class="bi bi-dot"></i></div>
                                            <div>
                                                <h6 class="fw-bold mb-0 text-muted">Final Approval</h6><small
                                                    class="text-muted">Awaiting verification</small>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="card border-0 shadow-sm rounded-4 h-100 text-white"
                                style="background: linear-gradient(135deg, var(--aset-blue) 0%, #002266 100%);">
                                <div class="card-body p-4">
                                    <h5 class="fw-bold mb-3">Priority Support</h5>
                                    <p class="small opacity-75 mb-4">Need urgent help? Our mentors are available for
                                        1-on-1 consultations.</p>
                                    <button class="btn btn-light w-100 text-primary fw-bold py-3">Chat with
                                        Advisor</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <style>
        .intake-step {
            display: none;
        }

        .intake-step.active {
            display: block;
            animation: intakeFade 0.5s cubic-bezier(0.16, 1, 0.3, 1);
        }

        @keyframes intakeFade {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .modal-backdrop.show {
            opacity: 0.8 !important;
            background-color: #020617 !important;
            backdrop-filter: blur(4px);
        }

        .intake-step .form-control:focus,
        .intake-step .form-select:focus {
            border-color: var(--aset-blue);
            box-shadow: 0 0 0 4px rgba(0, 68, 204, 0.1);
        }

        /* Specialized Flow Styles */
        .doc-upload-item {
            transition: all 0.3s ease;
        }

        .doc-upload-item:hover {
            border-color: var(--aset-blue) !important;
            transform: translateX(4px);
        }

        .upload-scroll-area::-webkit-scrollbar {
            width: 4px;
        }

        .upload-scroll-area::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 10px;
        }

        /* Progress Tracking Timeline */
        .tracking-timeline {
            position: relative;
        }

        .z-1 {
            z-index: 1;
        }

        .bg-success-subtle {
            background-color: #f0fdf4;
        }

        .border-primary {
            border-color: var(--aset-blue) !important;
        }

        .spinner-border-sm {
            width: 1rem;
            height: 1rem;
            border-width: 0.15em;
        }
    </style>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="./shared/scripts/institution-data.js"></script>
    <script src="./shared/scripts/app.js"></script>
    <script src="./shared/scripts/ui-states.js"></script>
    <script>
        // Centralized Route Management
        document.addEventListener('DOMContentLoaded', () => {
            // Initialize footer links
            document.querySelectorAll('[data-route]').forEach(link => {
                const routeKey = link.dataset.route;
                if (window.ROUTES && window.ROUTES[routeKey]) {
                    link.href = window.ROUTES[routeKey];
                }
            });

            // Initialize State dropdown
            const stateSelect = document.getElementById('intakeState');
            if (stateSelect && window.INSTITUTION_DATA) {
                Object.keys(window.INSTITUTION_DATA).sort().forEach(state => {
                    const option = document.createElement('option');
                    option.value = state;
                    option.textContent = state;
                    stateSelect.appendChild(option);
                });
            }
        });

        // Cascading Dropdown Logic
        function handleStateChange() {
            const state = document.getElementById('intakeState').value;
            const instSelect = document.getElementById('intakeInstitution');
            const facultySelect = document.getElementById('intakeFaculty');
            const deptSelect = document.getElementById('intakeDepartment');

            // Reset children
            instSelect.innerHTML = '<option value="" selected disabled>Select institution in ' + state + '</option>';
            instSelect.disabled = false;

            facultySelect.innerHTML = '<option value="" selected disabled>Select faculty</option>';
            facultySelect.disabled = true;

            deptSelect.innerHTML = '<option value="" selected disabled>Select department</option>';
            deptSelect.disabled = true;

            const institutions = Object.keys(window.INSTITUTION_DATA[state]);
            institutions.sort().forEach(inst => {
                const option = document.createElement('option');
                option.value = inst;
                option.textContent = inst;
                instSelect.appendChild(option);
            });
        }

        function handleInstitutionChange() {
            const state = document.getElementById('intakeState').value;
            const inst = document.getElementById('intakeInstitution').value;
            const facultySelect = document.getElementById('intakeFaculty');
            const deptSelect = document.getElementById('intakeDepartment');

            facultySelect.innerHTML = '<option value="" selected disabled>Select faculty</option>';
            facultySelect.disabled = false;

            deptSelect.innerHTML = '<option value="" selected disabled>Select department</option>';
            deptSelect.disabled = true;

            const faculties = Object.keys(window.INSTITUTION_DATA[state][inst]);
            faculties.sort().forEach(f => {
                const option = document.createElement('option');
                option.value = f;
                option.textContent = f;
                facultySelect.appendChild(option);
            });
        }

        function handleFacultyChange() {
            const state = document.getElementById('intakeState').value;
            const inst = document.getElementById('intakeInstitution').value;
            const faculty = document.getElementById('intakeFaculty').value;
            const deptSelect = document.getElementById('intakeDepartment');

            deptSelect.innerHTML = '<option value="" selected disabled>Select department</option>';
            deptSelect.disabled = false;

            const departments = window.INSTITUTION_DATA[state][inst][faculty];
            departments.sort().forEach(d => {
                const option = document.createElement('option');
                option.value = d;
                option.textContent = d;
                deptSelect.appendChild(option);
            });
        }

        function validateStep1() {
            const issueType = document.getElementById('issueType').value;
            // Immediate enable continue
            document.getElementById('btnContinueStep1').disabled = !issueType;
        }

        function goToStep(step) {
            document.querySelectorAll('.intake-step').forEach(s => s.classList.remove('active'));

            // Handle element ID branching
            const targetId = typeof step === 'string' ? step : 'intakeStep' + step;
            const targetElement = document.getElementById(targetId);

            if (targetElement) {
                targetElement.classList.add('active');
            }

            if (step === 3) {
                document.getElementById('authMatric').value = document.getElementById('intakeMatric').value || 'Student-Guest';
            }
        }

        // Branching Logic for specialized flows
        function handleIntakeStart() {
            const issueType = document.getElementById('issueType').value;
            if (issueType === 'Suspension of Studies' || issueType === 'Deferment of Studies') {
                goToStep(2);
            } else {
                goToStep(2);
            }
        }

        // Specialized redirect from Step 2
        function proceedFromStep2() {
            const issueType = document.getElementById('issueType').value;
            if (issueType === 'Suspension of Studies' || issueType === 'Deferment of Studies') {
                goToStep('suspensionStep1');
            } else {
                goToStep(3);
            }
        }

        function updateUploadStatus(input) {
            const item = input.closest('.doc-upload-item');
            const fileName = input.files[0].name;
            const textDiv = item.querySelector('.text-muted');
            textDiv.innerHTML = '<span class="text-success fw-bold">Uploaded: ' + fileName + '</span>';
            item.classList.replace('bg-light', 'bg-success-subtle');
            UIStates.showToast('Document uploaded successfully', 'success');
        }

        function handleSuspensionSubmit() {
            // Check if logged in (mock)
            const currentUser = ASET.getCurrentUser();
            if (!currentUser) {
                // Mock non-interruptive login / auth
                UIStates.showToast('Authentication required to finalize submission', 'info');
                goToStep(3); // Route to auth, but data is preserved in DOM
            } else {
                finalizeSuspension();
            }
        }

        function finalizeSuspension() {
            // Deprecated: Now we redirect to dashboard directly
            goToStep(3); // Go to auth
        }

        function finishFlow(mode) {
            const matric = document.getElementById('intakeMatric').value || 'Student-Guest';
            const issue = document.getElementById('issueType').value || 'New Case';
            const state = document.getElementById('intakeState').value;
            const inst = document.getElementById('intakeInstitution').value;
            const faculty = document.getElementById('intakeFaculty').value;
            const dept = document.getElementById('intakeDepartment').value;
            const level = document.getElementById('intakeLevel').value;
            const email = document.getElementById('intakeEmail').value;
            const phone = document.getElementById('intakePhone').value;

            // Specialized Data
            let specializedData = {};
            if (issue === 'Suspension of Studies' || issue === 'Deferment of Studies') {
                specializedData = {
                    reason: document.getElementById('suspensionReason').value,
                    duration: document.getElementById('suspensionDuration').value,
                    documentsUploaded: true, // Mock valid
                    status: 'Pending Approval',
                    progressStage: 3 // Counselling
                };
            }

            // Simple Validation
            if (!state || !inst || !faculty || !dept) {
                UIStates.showToast('Please complete all institutional selections', 'warning');
                return;
            }

            const btn = event.target;
            const originalText = btn.innerHTML;
            btn.disabled = true;
            btn.innerHTML = '<span class="spinner-border spinner-border-sm me-2"></span>Authenticating...';

            const studentData = {
                matric: matric,
                email: email,
                phone: phone,
                issueType: issue,
                state: state,
                institution: inst,
                faculty: faculty,
                department: dept,
                level: level,
                isNewUser: mode === 'signup',
                ...specializedData
            };
            localStorage.setItem('aset_intake_data', JSON.stringify(studentData));

            // ALWAYS Redirect to Dashboard
            setTimeout(() => {
                window.location.href = 'student/student-dashboard.html';
            }, 1000);
        }

        document.getElementById('loginForm').addEventListener('submit', function (e) {
            e.preventDefault();
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            const btn = e.target.querySelector('button[type="submit"]');
            btn.disabled = true;
            btn.innerHTML = '<span class="spinner-border spinner-border-sm me-2"></span>Signing in...';
            setTimeout(() => {
                const user = ASET.login(email, password);
                if (user) {
                    window.location.href = ROUTES.STUDENT_DASHBOARD;
                } else {
                    btn.disabled = false;
                    btn.innerHTML = 'Sign In <i class="bi bi-arrow-right ms-2 small"></i>';
                    UIStates.showToast('Invalid credentials. Try student@aset.edu.ng', 'error');
                }
            }, 1000);
        });

        // Toggle Password Visibility
        const passToggleBtn = document.querySelector('#loginForm .input-group button[type="button"]');
        if (passToggleBtn) {
            passToggleBtn.addEventListener('click', function () {
                const input = document.getElementById('loginPassword');
                const icon = this.querySelector('i');
                if (input.type === 'password') {
                    input.type = 'text';
                    icon.classList.replace('bi-eye', 'bi-eye-slash');
                } else {
                    input.type = 'password';
                    icon.classList.replace('bi-eye-slash', 'bi-eye');
                }
            });
        }

        // Scroll Reveal Animation
        (function () {
            const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
            if (prefersReducedMotion) {
                document.querySelectorAll('.scroll-reveal').forEach(el => el.classList.add('revealed'));
                return;
            }
            const revealElements = document.querySelectorAll('.scroll-reveal');
            const observerOptions = { root: null, rootMargin: '0px 0px -80px 0px', threshold: 0.1 };
            const revealOnScroll = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('revealed');
                        observer.unobserve(entry.target);
                    }
                });
            }, observerOptions);
            revealElements.forEach(el => revealOnScroll.observe(el));
        })();
    </script>
</body>

</html>