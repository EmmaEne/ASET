<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Mentor Dashboard | ASET</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    <link href="student-dashboard.css" rel="stylesheet">
    <link href="ui-states.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>

<body>

    <div class="app-layout">
        <!-- Sidebar -->
        <aside class="desktop-sidebar d-none d-lg-flex">
            <div class="sidebar-brand">
                <div class="brand-icon bg-info text-white"><i class="bi bi-person-video3"></i></div>
                <span class="brand-name">Mentor Portal</span>
            </div>
            <nav class="sidebar-nav">
                <a href="javascript:void(0)" class="nav-item active" onclick="switchView('students', this)">
                    <i class="bi bi-people"></i> <span>Assigned Students</span>
                </a>
                <a href="javascript:void(0)" class="nav-item" onclick="switchView('recommendations', this)">
                    <i class="bi bi-star"></i> <span>Recommendations</span>
                </a>
                <a href="javascript:void(0)" class="nav-item" onclick="switchView('messages', this)">
                    <i class="bi bi-chat-dots"></i> <span>Messages</span>
                </a>
            </nav>
            <div class="sidebar-footer">
                <div class="sidebar-user-card" onclick="handleLogout()">
                    <img src="https://ui-avatars.com/api/?name=Dr+Okonkwo&background=e0f2fe&color=0369a1&bold=true"
                        class="avatar-sm">
                    <div class="user-details ms-2">
                        <div class="name fw-bold small">Dr. Okonkwo</div>
                        <div class="role text-muted" style="font-size: 0.7rem;">Academic Mentor</div>
                    </div>
                </div>
            </div>
        </aside>

        <div class="app-container">
            <header class="top-bar">
                <div class="user-welcome">
                    <div class="avatar-circle d-lg-none">
                        <img src="https://ui-avatars.com/api/?name=Dr+Okonkwo&background=e0f2fe&color=0369a1&bold=true"
                            alt="User">
                    </div>
                    <div class="welcome-text">
                        <span class="greeting">Hello, Dr. Okonkwo</span>
                    </div>
                </div>
                <div class="d-flex gap-3 align-items-center">
                    <button class="btn-icon">
                        <i class="bi bi-bell"></i>
                        <span class="notify-badge"></span>
                    </button>
                    <button class="btn-icon d-none d-lg-flex" onclick="handleLogout()">
                        <i class="bi bi-box-arrow-right text-danger"></i>
                    </button>
                </div>
            </header>

            <main class="main-content">

                <!-- STUDENTS VIEW -->
                <div id="view-students" class="app-view active container-fluid">
                    <!-- Students Skeleton -->
                    <div class="skeleton-wrapper" id="studentsSkeleton">
                        <div class="view-header">
                            <div class="skeleton skeleton-title"></div>
                            <div class="skeleton skeleton-badge"></div>
                        </div>
                        <div class="row g-4">
                            <div class="col-md-6 col-lg-4">
                                <div class="skeleton-side-card" style="height: 320px;">
                                    <div class="skeleton skeleton-avatar xl" style="margin: 0 auto 1rem;"></div>
                                    <div class="skeleton skeleton-title" style="margin: 0 auto 10px; width: 60%;"></div>
                                    <div class="skeleton skeleton-text" style="margin: 0 auto; width: 40%;"></div>
                                    <hr>
                                    <div class="skeleton skeleton-text"></div>
                                    <div class="skeleton skeleton-text"></div>
                                    <div class="skeleton skeleton-button mt-4"></div>
                                </div>
                            </div>
                            <div class="col-md-6 col-lg-4">
                                <div class="skeleton-side-card" style="height: 320px;">
                                    <div class="skeleton skeleton-avatar xl" style="margin: 0 auto 1rem;"></div>
                                    <div class="skeleton skeleton-title" style="margin: 0 auto 10px; width: 60%;"></div>
                                    <div class="skeleton skeleton-text" style="margin: 0 auto; width: 40%;"></div>
                                    <hr>
                                    <div class="skeleton skeleton-text"></div>
                                    <div class="skeleton skeleton-text"></div>
                                    <div class="skeleton skeleton-button mt-4"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Students Actual Content -->
                    <div id="studentsContent" style="display: none;" class="content-loaded">
                        <div class="view-header">
                            <h2>My Mentees</h2>
                            <span class="badge bg-primary-subtle text-primary rounded-pill">Total: 4</span>
                        </div>

                        <div class="row g-4">
                            <!-- Student Card 1 -->
                            <div class="col-md-6 col-lg-4">
                                <div class="minimal-card p-0 overflow-hidden h-100 d-flex flex-column cursor-pointer"
                                    onclick="openStudentModal('Adebayo Oluwaseun', 'Computer Science')">
                                    <div class="p-4 bg-light text-center border-bottom">
                                        <img src="https://ui-avatars.com/api/?name=Adebayo+O&background=f0f9ff&color=0284c7&bold=true"
                                            class="rounded-circle mb-3 shadow-sm" style="width: 80px; height: 80px;">
                                        <h5 class="fw-bold mb-1">Adebayo Oluwaseun</h5>
                                        <div class="text-muted small">Computer Science • 200 Lvl</div>
                                    </div>
                                    <div class="p-3">
                                        <div class="d-flex justify-content-between mb-2">
                                            <span class="small text-muted fw-bold">CASE STATUS</span>
                                            <span class="status-pill warning">In Progress</span>
                                        </div>
                                        <div class="d-flex justify-content-between mb-2">
                                            <span class="small text-muted fw-bold">CGPA RISK</span>
                                            <span class="badge bg-success-subtle text-success rounded-pill"
                                                style="font-size: 0.7rem;">LOW RISK</span>
                                        </div>
                                    </div>
                                    <div class="mt-auto border-top p-3 bg-white">
                                        <button class="btn btn-primary w-100 btn-sm rounded-pill fw-bold">View
                                            Profile</button>
                                    </div>
                                </div>
                            </div>

                            <!-- Student Card 2 -->
                            <div class="col-md-6 col-lg-4">
                                <div class="minimal-card p-0 overflow-hidden h-100 d-flex flex-column cursor-pointer"
                                    onclick="openStudentModal('Chioma Eze', 'Biochemistry')">
                                    <div class="p-4 bg-light text-center border-bottom">
                                        <img src="https://ui-avatars.com/api/?name=Chioma+E&background=fdf2f8&color=db2777&bold=true"
                                            class="rounded-circle mb-3 shadow-sm" style="width: 80px; height: 80px;">
                                        <h5 class="fw-bold mb-1">Chioma Eze</h5>
                                        <div class="text-muted small">Biochemistry • 300 Lvl</div>
                                    </div>
                                    <div class="p-3">
                                        <div class="d-flex justify-content-between mb-2">
                                            <span class="small text-muted fw-bold">CASE STATUS</span>
                                            <span class="status-pill text-muted bg-secondary bg-opacity-10">None</span>
                                        </div>
                                        <div class="d-flex justify-content-between mb-2">
                                            <span class="small text-muted fw-bold">CGPA RISK</span>
                                            <span class="badge bg-danger-subtle text-danger rounded-pill"
                                                style="font-size: 0.7rem;">HIGH RISK</span>
                                        </div>
                                    </div>
                                    <div class="mt-auto border-top p-3 bg-white">
                                        <button class="btn btn-primary w-100 btn-sm rounded-pill fw-bold">View
                                            Profile</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- RECOMMENDATIONS VIEW -->
                <div id="view-recommendations" class="app-view container-fluid">
                    <!-- Recommendations Skeleton -->
                    <div class="skeleton-wrapper" id="recommendationsSkeleton">
                        <div class="view-header">
                            <div class="skeleton skeleton-title"></div>
                        </div>
                        <div class="skeleton-activity-feed">
                            <div class="skeleton-feed-item">
                                <div class="skeleton skeleton-icon"></div>
                                <div class="skeleton-feed-content">
                                    <div class="skeleton skeleton-text w-50"></div>
                                    <div class="skeleton skeleton-text w-75"></div>
                                    <div class="skeleton skeleton-text w-25"></div>
                                </div>
                            </div>
                            <div class="skeleton-feed-item">
                                <div class="skeleton skeleton-icon"></div>
                                <div class="skeleton-feed-content">
                                    <div class="skeleton skeleton-text w-50"></div>
                                    <div class="skeleton skeleton-text w-75"></div>
                                    <div class="skeleton skeleton-text w-25"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Recommendations Actual Content -->
                    <div id="recommendationsContent" style="display: none;" class="content-loaded">
                        <div class="view-header">
                            <h2>Reference Letters</h2>
                        </div>
                        <div class="activity-feed">
                            <div class="feed-item border">
                                <div class="feed-icon"><i class="bi bi-file-text"></i></div>
                                <div class="feed-content">
                                    <h4>Letter Submitted</h4>
                                    <p>Recommendation for Adebayo O. (Transfer Request)</p>
                                    <span class="time">Dec 12, 2023</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- MESSAGES VIEW -->
                <div id="view-messages" class="app-view">
                    <div class="view-header">
                        <h2>Direct Messages</h2>
                    </div>
                    <div class="message-threads">
                        <div class="thread-item unread">
                            <img src="https://ui-avatars.com/api/?name=Adebayo+O&background=f0f9ff&color=0284c7&bold=true"
                                class="avatar-sm">
                            <div class="thread-info">
                                <div class="thread-top">
                                    <span class="sender">Adebayo Oluwaseun</span>
                                    <span class="time">10:30 AM</span>
                                </div>
                                <p class="preview">Good morning sir, I wanted to ask about the transfer requirements...
                                </p>
                            </div>
                            <span class="unread-dot"></span>
                        </div>
                    </div>
                </div>

            </main>

            <!-- Bottom Nav -->
            <nav class="bottom-nav d-lg-none">
                <a href="javascript:void(0)" class="nav-btn active" onclick="switchView('students', this)">
                    <i class="bi bi-people"></i> <span>Mentees</span>
                </a>
                <a href="javascript:void(0)" class="nav-btn" onclick="switchView('recommendations', this)">
                    <i class="bi bi-star"></i> <span>Ref</span>
                </a>
                <a href="javascript:void(0)" class="nav-btn" onclick="switchView('messages', this)">
                    <i class="bi bi-chat-dots"></i> <span>Chat</span>
                </a>
            </nav>
        </div>
    </div>

    <!-- Student Detail & Recommendation Modal -->
    <div class="modal fade" id="studentModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content rounded-4 border-0 shadow-lg">
                <div class="modal-header border-0 pb-0">
                    <h5 class="fw-bold px-2 pt-2">Student Profile</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body p-4">
                    <div class="text-center mb-4">
                        <h4 class="fw-bold mb-0" id="mStudentName">Student Name</h4>
                        <span class="text-muted small" id="mStudentDept">Department</span>
                    </div>

                    <ul class="nav nav-pills nav-fill mb-3 bg-light rounded-3 p-1" id="pills-tab" role="tablist">
                        <li class="nav-item">
                            <button class="nav-link active rounded-3 small fw-bold py-2" data-bs-toggle="pill"
                                data-bs-target="#tab-history">History</button>
                        </li>
                        <li class="nav-item">
                            <button class="nav-link rounded-3 small fw-bold py-2" data-bs-toggle="pill"
                                data-bs-target="#tab-recommend">Recommendation</button>
                        </li>
                    </ul>

                    <div class="tab-content" id="pills-tabContent">
                        <div class="tab-pane fade show active" id="tab-history">
                            <div class="border rounded-4 p-3 mb-2">
                                <div class="d-flex justify-content-between mb-1">
                                    <span class="fw-bold small">Change of Programme</span>
                                    <span class="text-muted small">2024</span>
                                </div>
                                <span class="badge bg-warning-subtle text-warning">Ongoing</span>
                            </div>
                            <div class="border rounded-4 p-3">
                                <div class="d-flex justify-content-between mb-1">
                                    <span class="fw-bold small">Probation Warning</span>
                                    <span class="text-muted small">2023</span>
                                </div>
                                <span class="badge bg-danger-subtle text-danger">Resolved</span>
                            </div>
                        </div>
                        <div class="tab-pane fade" id="tab-recommend">
                            <p class="small text-muted mb-2">Write a recommendation note for this student's case file.
                            </p>
                            <textarea class="form-control bg-light border-0 rounded-3 mb-3 p-3" rows="4"
                                placeholder="Enter your recommendation here..."></textarea>
                            <button class="btn btn-primary w-100 rounded-3 fw-bold"
                                onclick="submitRecommendation()">Submit Recommendation</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="app.js"></script>
    <script src="ui-states.js"></script>
    <script>
        function openStudentModal(name, dept) {
            document.getElementById('mStudentName').innerText = name;
            document.getElementById('mStudentDept').innerText = dept;
            new bootstrap.Modal('#studentModal').show();
        }

        function submitRecommendation() {
            const btn = document.querySelector('#tab-recommend button');
            const original = btn.innerText;
            btn.innerText = 'Submitting...';
            btn.disabled = true;

            setTimeout(() => {
                btn.innerText = 'Submitted Successfully!';
                btn.classList.replace('btn-primary', 'btn-success');

                // Show success toast
                UIStates.showToast('Recommendation submitted successfully!', 'success');

                setTimeout(() => {
                    bootstrap.Modal.getInstance(document.getElementById('studentModal')).hide();
                    btn.disabled = false;
                    btn.innerText = original;
                    btn.classList.replace('btn-success', 'btn-primary');
                    ASET.addActivity('Recommendation', 'You submitted a recommendation letter', 'bi-star-fill');
                }, 1000);
            }, 1000);
        }
    </script>
</body>

</html>