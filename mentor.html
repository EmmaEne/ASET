<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mentor Dashboard | ASET</title>
    <link href="styles.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
</head>

<body class="bg-light">

    <div class="dashboard-layout">
        <aside class="sidebar">
            <div class="sidebar-header">
                <a href="#" class="d-flex align-items-center gap-2 text-white text-decoration-none fs-4 fw-bold">
                    <span class="bg-white text-primary rounded px-2"><i class="bi bi- eyeglasses"></i></span>
                    <span style="font-family: var(--font-display);">Mentor</span>
                </a>
            </div>

            <nav class="sidebar-nav">
                <a href="#" class="nav-link-custom active"><i class="bi bi-people-fill"></i> My Students</a>
                <a href="#" class="nav-link-custom"><i class="bi bi-chat-square-text-fill"></i> Recommendations</a>
            </nav>

            <div class="p-3 border-top border-white border-opacity-10">
                <button class="btn btn-link text-white w-100 text-start ps-0" onclick="ASET.logout()">
                    <i class="bi bi-box-arrow-right me-2"></i> Logout
                </button>
            </div>
        </aside>

        <main class="main-content">
            <header class="d-flex justify-content-between align-items-center mb-5">
                <div>
                    <h2 class="fw-bold mb-1">Mentorship Program</h2>
                    <p class="text-secondary">Guide students through academic transitions.</p>
                </div>
            </header>

            <div class="row g-4" id="studentsGrid">
                <!-- Javascript will populate this grid -->
            </div>

            <!-- Comment Modal -->
            <div class="modal fade" id="mentorModal" tabindex="-1">
                <div class="modal-dialog modal-dialog-centered">
                    <div class="modal-content rounded-4 border-0 shadow-lg px-3 py-2">
                        <div class="modal-header border-0 pb-0">
                            <h5 class="fw-bold">Add Recommendation</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                        </div>
                        <div class="modal-body">
                            <form id="mentorForm">
                                <div class="mb-3">
                                    <label class="form-label small fw-bold">Student Advice / Note</label>
                                    <textarea class="form-control" rows="5"
                                        placeholder="Write your academic advice here..." required></textarea>
                                </div>
                                <div class="form-check mb-4">
                                    <input class="form-check-input" type="checkbox" id="visibleToStudent" checked>
                                    <label class="form-check-label text-secondary small" for="visibleToStudent">
                                        Visible to Student
                                    </label>
                                </div>
                                <button type="submit" class="btn btn-primary w-100">Post Comment</button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>

        </main>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="app.js"></script>
    <script>
        ASET.checkAuth('mentor');

        // Mock Students data for demonstration
        const assignedStudents = [
            { name: 'Chioma Okonkwo', id: 'S100', dept: 'Computer Science', issue: 'Probation Recovery', status: 'Active' },
            { name: 'David West', id: 'S102', dept: 'Economics', issue: 'Change of Programme', status: 'Pending' },
            { name: 'Sarah Ali', id: 'S103', dept: 'Law', issue: 'Withdrawal', status: 'Active' }
        ];

        const grid = document.getElementById('studentsGrid');

        assignedStudents.forEach(s => {
            const col = document.createElement('div');
            col.className = 'col-md-6 col-xl-4';
            col.innerHTML = `
                <div class="card-clean h-100 p-4">
                    <div class="d-flex justify-content-between align-items-start mb-4">
                        <div class="d-flex align-items-center gap-3">
                             <div class="avatar rounded-circle bg-primary-subtle text-primary fw-bold d-flex align-items-center justify-content-center" style="width: 48px; height: 48px; font-size: 1.2rem;">
                                ${s.name.charAt(0)}
                             </div>
                             <div>
                                <h6 class="fw-bold mb-0 text-dark">${s.name}</h6>
                                <div class="text-secondary small font-monospace">${s.id}</div>
                             </div>
                        </div>
                        <span class="badge rounded-pill bg-light text-secondary border small">Level 200</span>
                    </div>
                    
                    <div class="p-3 bg-light rounded-3 mb-4 border">
                        <label class="text-secondary text-uppercase fw-bold small d-block mb-1" style="font-size: 0.7rem;">Request Type</label>
                        <div class="fw-medium text-dark">${s.issue}</div>
                    </div>

                    <div class="d-flex gap-2">
                        <button class="btn btn-outline-primary btn-sm flex-fill" onclick="new bootstrap.Modal(document.getElementById('mentorModal')).show()">
                            <i class="bi bi-chat-text me-1"></i> Add Note
                        </button>
                        <button class="btn btn-light border btn-sm flex-fill">View Profile</button>
                    </div>
                </div>
            `;
            grid.appendChild(col);
        });

        document.getElementById('mentorForm').addEventListener('submit', (e) => {
            e.preventDefault();
            alert('Recommendation saved successfully.'); // In real app, this would save to localStorage logs
            bootstrap.Modal.getInstance(document.getElementById('mentorModal')).hide();
        });
    </script>
</body>

</html>